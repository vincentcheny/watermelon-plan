<!--pages/exchange/index.wxml-->
<view class="integral">ğŸ­ï¼š{{userIntegral || 0}}</view>
<view class="charts-box">
  <qiun-wx-ucharts 
    type="line"
    opts="{{opts}}"
    chartData="{{chartData}}"
  />
</view>
<view class="container" data-weui-theme="{{theme}}">
    <view wx:for="{{type}}" wx:for-item="typeItem" wx:key="*this" class="box">
        <view class="row">
            <view class="row_title row_width_content">{{typeItem == 'daily' ? 'æ¯æ—¥' : typeItem == 'weekly' ? 'æ¯å‘¨' : 'å…¶å®ƒ'}}ä»»åŠ¡</view>
            <view class="row_title row_width_number">ç§¯åˆ†</view>
            <view class="row_title row_width_action">æ“ä½œ</view>
        </view>
        <view class="divider"></view>
        <view wx:for="{{record}}" wx:key="_id">
            <view class="row row_detail" wx:if="{{item.type == typeItem}}">
                <view class="row_width_content">
                    <image wx:if="{{item.mission_image}}" class="image_detail" mode="scaleToFill" src="{{item.mission_image}}"></image>
                    {{item.mission_content}}
                </view>
                <view class="row_width_number">
                    {{item.mission_score}}
                </view>
                <view class="row_width_action">
                    <view id="{{item._id}}" class="button {{item.is_finished && 'button_disabled'}}" bindtap="{{item.is_finished ? '' : 'submitMission'}}" data-score="{{item.mission_score}}" data-type="{{item.type}}">
                        {{item.is_finished ? 'åšè¿‡æƒ¹' : 'å®Œæˆ'}}
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>
